随着互联网技术的发展和数字设备的普及，基于内容的图像检索(CBIR)在计算机视觉和人工智能的各个领域得到了发展和应用。目前，可以从输入图像从大规模数据库中有效地检索相关图像。在过去的十年里，人们努力建立了CBIR的新理论和模型，建立了许多有效的CBIR算法。本文介绍了2009-2019年CBIR理论和算法的快速发展和应用。我们主要从图像表示和数据库搜索的角度来回顾技术的发展。进一步总结了CBIR在时尚图像检索、人再识别、电子商务产品检索、遥感图像检索和商标图像检索等领域的实际应用。最后，我们将面对大数据的挑战和深度学习技术的利用，讨论了CBIR的未来研究方向。



# 一、Introduction

对于一个CBIR系统，有两种主要的机制或组件，它们分别是用于图像索引的图像表示和用于数据库搜索的相似度度量。

特征向量或图像表示应具有鉴别性，以区分图像。更重要的是，它也被期望对某些转换是不变的。基于图像表示，两幅图像之间的相似性度量应该反映出语义上的相关性。这两个相互连接的组件对检索性能至关重要，现有的CBIR算法可以根据它们对这两个组件的贡献进行分类。

事实上，从大规模数据库中获得准确的检索图像仍然是一个挑战。最大的挑战是图像的高级意义与其低层次视觉特征之间的语义差距

最近，已经有了一些与CBIR相关的调查。

Zheng等[7]对基于尺度不变特征变换(SIFT)和卷积神经网络(CNN)的2006-2016年的图像搜索进行了调查。

拉德诺维奇等人[8]从牛津和巴黎数据集的角度进一步调查了相关的搜索方法。

Zhou等人[9]对2003年后过去十年的CBIR研究进行了调查。

然而，在这些调查中也存在一些缺陷。一方面，它们没有包括2017-2019年的最新研究，在此期间，图像检索技术在大数据和利用深度学习的挑战下迅速发展。事实上，有许多新的图像检索算法值得总结。另一方面，他们只关注技术的发展，而没有对实际应用的深入总结。在本次调查中，我们主要关注2009-2019年CBIR的技术发展和实际应用。

本文的主要贡献在于三个方面：

- 本文首次从图像表示和数据库检索的角度对2009-2019年期间的技术发展进行了回顾和分类。
- 我们进一步总结了CBIR在2009-2019年在时尚图像检索、人物再识别、电子商务产品检索、遥感图像检索和商标图像检索等领域的实际应用。
- 面对大数据和深度学习技术的挑战，分析和讨论了CBIR未来的研究方向

本文的其余部分组织如下。第2节介绍了CBIR的一般管道。第3节和第4节分别回顾了近年来CBIR对图像表示和数据库搜索的发展。在第5节中进一步总结了CBIR的实际应用。此外，我们还在第6节中概述了CBIR未来的潜在发展方向。最后我们在第7节作一个简短的结论

#  二、General flflowchart overview

我们开始介绍CBIR系统的总体框架，它可以进一步分为离线子系统和在线子系统，如图1所示

![image-20220705101948975](D:\文献阅读\image\image-20220705101948975.png)

在离线子系统中，每幅图像被其提取的特征向量作为检索数据库中的索引。

在在线子系统中，输入查询图像后，以检索数据集中的图像相同的方式提取其特征向量。然后，我们使用这个特征向量来用相似性度量对数据库中所有可能的图像进行评分。那些得分高于预定义阈值的图像被选中，通过增强与原始查询相比的视觉上下文来进一步细化

最后，将这些按重秩分数的下降顺序排列的图像视为检索系统的概率排序结果或输出。在这个框架中，基于特征的图像表示是基于某些相似性度量的数据集索引的基础。从技术的角度来看，CBIR系统是基于图像表示和数据库搜索的。因此，我们可以分别从图像表示和数据库搜索的发展来调查CBIR的研究。

# 三、Image representation

对于CBIR，关键步骤是图像表示，从给定的图像中提取关键特征，然后将它们转换为一个固定大小的向量（即所谓的特征向量）。

一般来说，提取的特征主要可分为三类：传统特征、CNN特征分类和检索CNN特征。在本节中，我们分别根据以下这三个特征类别总结CBIR的图像表示方法。为了清晰起见，基于图像表示的方法的层次类别如图2所示。

![image-20220705102801134](D:\文献阅读\image\image-20220705102801134.png)

## 3.1 Conventional feature based methods

这里的传统特征是指没有通过任何CNN方法提取的特征。它们主要用于早期的CBIR系统，但近年来也在某些方面也取得了显著的发展。这些特性是启发式设计的，可以进一步分为全局特性和局部特性。

全局特征通常分别从图像的颜色[10]、形状[11]、纹理[12]和结构中提取，然后转换为整体表示。当然，这些多类型的全局特征可以进一步组合在一起进行图像检索。

Li等人[13]实际上开发了一种两阶段生成/鉴别学习算法，将颜色、纹理和结构特征结合在一起进行图像检索。具体来说，生成阶段对图像的各种描述的长度进行了归一化，而鉴别阶段识别了哪些图像包含目标对象。事实上，该算法可以在不做任何建模假设的情况下组合任意数量的不同特征类型 。

Berman等人[14]提出了一套组合特征的操作，并提出了一种灵活的图像数据库系统(FIDS)，其中网格距离度量和组合操作也可以组合任何一组多种类型的特征。

此外，Zhao等人[15]采用稀疏表示(SR)进行图像检索。他们首先探讨了前向和后向SRs之间的区别和互补性，然后建立了一种新的半监督学习模型协同稀疏表示，有效地将它们结合起来，提高了图像标注性能。结果表明，该基于SR的方法在图像检索方面取得了良好的效果。虽然这些方法由于其紧凑的表达式，适用于大规模图像数据库中的重复检测，但当目标图像涉及到一些背景杂波时，它们可能不能正常工作

____

另一方面，最著名的局部特征之一是SIFT，它主要涉及两个步骤：兴趣点检测和局部区域描述。近年来，许多局部特征提取方法都是对SIFT的扩展。

例如，Zhou等人[16]开发了SIFT描述符的二进制签名，其中两个中值阈值由原始描述符阈值本身确定。

此外，利用该二进制SIFT建立了一种新的CBIR索引方案BSIFT。

此外，在SIFT的基础上，将边缘添加到特征描述符中，建立EdgeSIFT[18]等。

除了SIFT等图像关键点的特征提取方法外，一些局部特征方法在密集网格上提取特征，可能独立于图像内容

____

事实上，近年来已经发展出了各种本地描述符。由于这些方法具有不同的优越性，因此要为检索任务选择最佳的方法是相当困难的。

然而，Madeo等人[20]从速度、紧凑性和区别性三个方面对一些典型的局部描述符进行了比较分析。

当通过数据集的样本图像变化巨大的某种本地特性，通常需要将这些局部特征聚合成一个向量表示与固定长度的后续数据库搜索通过相似性的比较查询所有的数据库图像。这些聚合方案大多需要对这些局部特征进行聚类分析，以获得所获得的聚类中心的码本。根据该码本，原始的特征向量可以以不同的方式进行聚合。

Sivic等人[21]提出了单词袋(BoW)方法，它使用k-means算法来创建码本。然后利用最接近特征点的聚类中心来代替特征点。

通常，这种聚合方案会丢失一定的详细信息，生成的波波向量非常稀疏。

佩罗宁等人[22]进一步提出了Fisher向量(FV)，它使用高斯混合模型(GMM)聚合局部描述符。实际上，GMM可以用于聚类分析，它直接考虑从特征点到每个聚类中心的距离。在FV方法中，每个特征点都由所有聚类中心的线性组合来表示。并且，该聚合方案在GMM建模过程中也丢失了一些信息。

基于BOW和FV方案，Jegou等人[23]提出了局部聚合描述子向量(VLAD)方案。

一方面，与BOW一样，VLAD只考虑最接近特征点的集群中心，并保存从每个特征点到最接近它的集群中心的距离。另一方面，与FV一样，VLAD考虑特征点的每个维度的值，它对图像的局部信息有更详细的描述。更重要的是，VLAD特性没有丢失信息。其他一些作品[24–28]是对VLAD的改进或扩展，这已经被许多实验证明。

由Husain[29]提出的鲁棒视觉描述符(RVD)将基于秩的多重分配与鲁棒积累相结合，以减少异常值的影响，这是一个相对较新的研究方法。

## 3.2. Classifification CNN feature based methods

由于传统特征的表示能力有限，以及通过深度神经网络进行图像处理的突破，基于CNN的图像检索近年来发展迅速。由于CNN在图像分类方面取得了重大突破，许多研究人员尝试使用经过CBIR分类任务训练的CNN特征。在本小节中，我们对具有CNN特征分类的这些方法进行了总结

如上所述，CNN的功能也可以分为两种类型：全局两种和局部两种。来自CNN深度全连接层的特征本质上是描述图像整体语义信息的深层全局特征。目前存在着一些基于深度全局特征的方法

Babenko等人[30]采用了全连接层的激活，其中CNN以与测试集相关的数据集作为全局描述符，然后进行降维。然而，制作有标记的训练数据的成本是昂贵的，所以一些工作只使用在ImageNet上预先训练过的现成网络。

Babenko等人的[30]研究表明，使用第7个全连接层(fc7)特征比使用第8个全连接层(fc8)特征具有更好的检索效果。这是因为高层特征旨在对训练前的数据集执行分类任务，而下层特征对其他数据集具有更好的泛化能力。这些方法可以产生紧凑的嵌入特征，从而在滤波步骤中快速进行相似度计算，但可能缺乏对图像细节的描述，这对图像检索不那么重要。因此，有越来越多的工作关注CNN的局部特征。

____

根据图像表示提取过程中的特征，基于局部CNN特征的方法可以进一步分为三类：局部表示聚合、深度卷积特征聚合和多层融合。通常，这些方法使用只在ImageNet上预先训练过的现成网络作为特征提取器。

### （1）local representation aggregation

我们开始考虑**局部表示聚合**的方法。实际上，他们首先尝试从输入图像中提取一系列局部区域，然后将这些局部区域馈给网络，并生成相应的部分图像表示。因此，这些部分的图像表示将被聚合成一个紧凑的图像表示。根据局部区域提取的差异，我们将这类方法进一步分为三类：基于滑动窗口的局部区域提取、感兴趣区域检测和基于区域建议的局部区域提取。

第一种方法通常通过一系列不同的滑动窗口在输入图像上滑动，以创建部分区域。

Raz维安等人[31]使用4种不同大小的滑动窗口和fc7特征作为图像的部分表示。

Gong等[32]提出了多尺度无有序池(MOP)算法，将不同尺度水平的CNN图像补丁激活嵌入和聚合，然后使用VLAD对这些部分图像表示进行聚合。



第二种方法实现了一些特定的检测算法来提取输入图像中感兴趣的区域。

例如，补丁卷积核网络(Patch-CKN)[33]利用Hessian-affifine检测器来提取输入图像中感兴趣的区域。

Mopuri等人[34]利用一个经过训练的鲁棒地标定位的检测器来产生更有效的区域搜索系统。

第三种方法是基于区域的建议，并利用了一些具体的候选区域生成算法，以获得可能包含目标的局部候选区域。

Mopuri等人利用选择性搜索提取了2000个局部区域，并将这些区域输入网络，然后通过生成的fc7特征的最大池化计算出图像级表示

互补CNN和SIFT（CSC）[36]使用EdgeBox提取每幅图像100个局部区域，并将这些区域输入网络，然后使用VLAD聚合这些CNN特征。上述所有方法都需要多个前馈网络，使其效率成为瓶颈。

### (2) Deep convolutional feature aggregation 

深度卷积特征聚合方法是基于深度卷积特征可以作为对输入图像局部区域的描述。这些方法只输入网络一次，生成深度卷积特征，并将其聚合，得到图像的最终表示，因此计算效率较高。这些方法的关键问题是如何聚合深度卷积特征。

通过考虑聚合中是否存在加权机制，我们可以将这些方法分为直接聚合和加权聚合。

____

**1.直接聚合方法**

直接聚合方法使用一些特定的聚合方法对深度卷积特征进行聚合，得到最终的图像表示。

聚合方法可以使用经典的方法，如BOW、VLAD、FV、最大池化和和池化。

区域最大卷积激活(R-MAC)[37]通过在卷积特征图中的局部区域进行均匀采样和聚合，以考虑区域信息。

求和池卷积(SPoC)[38]结果表明，当最终的图像表示被白化时，求和池化方法优于最大池化方法。

采用具有增强的鲁棒视觉描述器(RVD-W)方法[29]对CNN特征进行聚合，进一步提高了检索性能

Iscen等人[39]利用多尺度网格和CNN特性，通过扩散实现查询扩展。

____

**2.加权聚合方法**

加权聚合方法采用直接聚合策略对深度卷积特征进行编码，并根据每个位置特征的重要性对深度卷积特征进行加权。

选择性卷积描述子聚合(SCDA)[40]提出了一种无监督的方法，在定位代表性对象的同时去除噪声背景，从而改进了细粒度的图像检索。

卡兰蒂迪斯等人[41]提出了通过在CNN特征聚合中引入跨维加权来扩展SPoC的Crow。

Jimenez等人[42]使用类激活map(CAMs)来计算卷积特征图的语义感知空间权值。

通过基于部分的加权聚合(PWA)[43]发现，深度卷积特征的不同通道对应于目标不同部分的响应。

一些检索方法[44,45]采用了注意机制。

DEep局部特征(DELF)[44]采用基于学习的注意网络，利用注意网络对特征地图的所有点进行密集加权。

Kim等人[45]提出了一个简单而有效的区域注意网络，该网络对考虑全局背景的区域的注意得分进行加权。

### （3）multi-layer fusion

最后，我们考虑了多层融合的方法。事实上，深层CNN特征是层次化的，也就是说，随着CNN层次的深入，它们从低级的视觉特征转变为高级的语义特征

事实上，深层CNN特征是层次化的，也就是说，随着CNN层次的深入，它们从低级的视觉特征转变为高级的语义特征。

如前所述，深度卷积特征聚合方法的目的是补充深度神经网络中不同层特征的信息，以综合不同层特征的不变性和鉴别能力。我们可以进一步将这些多层特性融合在一起。

事实上，多尺度区域最大卷积激活(MS-RMAC)[46]分别从VGG-16中R-2层、2层、3-3层、3层和5-3层中分别提取R-MAC特征[37]，然后将结果特征加权为最终的图像表示。

Seddati等人[47]提出了一种改进的RMAC特征，通过特征选择结合了多尺度和两层特征提取机制。

基于区域熵的多层抽象池（重映射）[48]从多个CNN层中学习并聚合了深层特征的层次结构，并以端到端三重损失的方式进行训练。

## 3.3. Retrieval CNN feature based methods



虽然很多研究集中于从预先训练的分类任务的深度网络中提取的特征，但后来的研究表明，深度网络可以通过端到端[49,50]直接训练实例检索任务。

为了加强类内判别和更细粒度的实例级图像表示，目前的研究主要使用深度度量学习。

深度度量学习的目的是学习一个嵌入空间，其中相似样本的嵌入向量被鼓励更近，而不同的向量被推分开。它的关键是利用一个损失函数来优化排名而不是分类，并有一个 hard-negative挖掘技术来提高学习到的嵌入空间[51,52]的质量。这类方法代表了目前最先进的图像检索技术

在深度度量学习中有一些有效的损失函数，如对比损失、三重损失、三联体中心损失、四联体损失、提升结构损失、n对损失、二项偏差损失、直方图损失、角损失、基于距离加权边缘的损失和分层三重损失。它们的共同原则是二次采样一小组图像，验证它们是否在局部符合排名目标，如果它们不符合，则执行一个小的模型更新，并重复这些步骤直到收敛。基于检索CNN特征的检索方法采用了上述损失函数。

Radenovic等人[56]使用对比损失来学习图像表示，

而Gordo等人的[49]则引入了三联体损失。同样，n对损失[57]、三联体-中心损失[58]和四联体损失[59]都能有效地提高检索精度。

Kim等人[54]提出了一种新的三重态损失，允许标签空间中的距离比保持在学习的度量空间中。

最近，He等人[60]引入了平均精度(AP)损失，并在patch验证、patch检索和图像匹配方面展示了其突出的结果。

受此启发，Revaud等人。[53]通过利用listwise损失公式的最新进展，直接优化了全局平均平均精度(mAP)。与现有的损失相比，它可以在每次迭代中同时考虑数千张图像，并在许多标准检索基准上建立了一个新的最先进的图像表示。

Hard-negative挖掘技术可以显著提高深度度量学习中学习嵌入空间的质量。事实上，CBIR在这方面已经做了很多工作。

lifted structured loss[51]通过在自身内部合并hard-negative挖掘功能，每次考虑一个小批中的所有正对和负对。

Kim等人[54]设计了一种适用于具有连续标签的度量学习的三重挖掘策略。

一般来说，semi-hard mining、 smart mining、距离加权采样等hard-negative mining技术可以用于基于检索CNN特征的检索方法。

特别是Wang等人[55]建立了一个通用对加权(GPW)框架，通过梯度分析将深度度量学习的抽样问题转化为对加权的统一视图，为理解最近pairbased损失函数提供了一个强大的工具。



# 四、Database search

利用有效的图像表示或特征向量，我们可以进一步建立CBIR系统的数据库索引方法，并通过相似性度量度量对图像索引进行搜索。为了清晰起见，这整个过程被称为数据库搜索。由于检索时间是影响CBIR系统性能的关键，因此数据库搜索非常重要，特别是在一个大规模的图像数据库中。

事实上，一种有效的数据库搜索方法可以显著加快检索过程，并大大减少内存的使用。

高维特征向量的数据库搜索方法通常分为两种类型：特征直接数据库搜索和特征利用数据库搜索。

然而，在实际应用中，数据库搜索方法经常将这两种数据库搜索方法结合在一起，以进行性能优化。为清晰起见，数据库搜索方法的层次类别如图3所示。

![image-20220705112328166](D:\文献阅读\image\image-20220705112328166.png)

## 4.1. Feature-direct database search

特征直接数据库搜索方法利用每幅图像的特征向量作为数据库搜索的索引，即特征向量直接作为原始图像的索引。

事实上，对于CBIR存在一些有效的特征直接数据库搜索方法。

一些方法通过倒置文件索引技术来加快检索过程，而其他方法则通过层次聚类或k维树(KD树)来缩小搜索路径。这类最常用的搜索方法是反向文件索引(IFI)[61]。因此，我们总结了近年来针对CBIR的IFI的发展情况

受信息检索领域的启发，IFI存储了唯一的单词id到其中单词所在的文档id的映射。

在CBIR系统中，IFI是一个稀疏矩阵的紧凑表示，其行和列分别表示图像和视觉单词。因此，在查询阶段，包含与查询图像相关的通用视觉词的数据库图像将参与欧氏距离、余弦距离等相似度的计算，大大提高了时间效率。

IFI是许多搜索系统[62,63]的核心组件，因为它促进了更快、更可扩展的查询。一些方法对原来的IFI进行了一定的改进。

倒置多索引(IMI)[64]利用产品量化的思想构建了一个多索引结构来优化重排序搜索空间。传统的IFI结构的索引是在一维数据中进行的，而IMI结构的索引使用了一个多维表。当使用IMI进行检索时，返回的候选反向列表更短，候选元素与查询词更接近，召回率更高。

郑等[65]使用多个逆文档频率(IDF)方法来适应多个特性之间的相关性和存储相应的二进制代码特性的反向索引，而刘等[66]提出了原始的交叉特征空间和二进制空间。

为了提高检索精度，一些方法将语义信息嵌入到反向表中。

Karayev等[67]通过语义属性基于SIFT特征去除倒置表中的无关图像，插入语义相关的图像，大大增强了索引中特征的区分能力。

Zhang等[68]提出了一种将语义属性共索引为局部特征生成的反向索引的方法，使索引传递了更多的语义线索。还有一些改进的算法来加快检索速度。

Zheng等人[69]提出了一个Q指数，去掉了查询图像中不重要的特征，只根据预定义的特征得分检索了倒置表中更重要的特征。

对于并行检索，Ji等人[70]在多个服务器上建立了分布式索引，并将索引分布问题定义为一个学习问题，以减少服务器之间的搜索延迟

为了提高召回率，通常对一幅图像使用多个量化器来得到多个索引[71,72]。

Xia等人[71]使用协同索引结构来同时优化多个量化器。[

72]等人提出的非正交倒交多指数(NOIMI)是一种用于大量深度特征数据的快速索引方法。NO-IMI包括两个代码表S和T，每个代码表都包含K个代码字。年代是一个一阶代码表和聚类生成的原始数据，而T是一个二阶代码表和集群生成的剩余数据之间的原始数据和每个相应的一阶集群（代码字），从而摆脱任何正交子空间的分解。因此，NOIMI提供了更合理的索引单元，质心更准确地代表实际数据分布，为大量深度CNN特征数据索引。

## 4.2. Feature-utilized database search

利用特征的数据库搜索方法通过将高维浮点特征向量映射到低维向量或二值向量中，降低了距离的计算复杂度。

### (1)hash-based

一种广泛使用的特征利用的数据库搜索方法是基于哈希的索引，它将图像压缩成一系列哈希码，这样搜索就可以转换为哈希码之间的汉明距离的比较。因此，它可以降低计算复杂度和存储成本。

一般来说，基于哈希的方法可以分为数据独立的方法[73]和数据依赖的方法[74–77]。

实际上，数据依赖的方法可以进一步分为无监督哈希方法[74,75]和有监督哈希方法[76–78]。

基于哈希的方法的层次结构如图4所示。

![image-20220705114427853](D:\文献阅读\image\image-20220705114427853.png)

____

数据独立的方法是基于哈希函数的独立生成，没有任何训练数据的信息

最具代表性的是局部敏感哈希(LSH)[73]，它使用许多随机映射哈希函数来划分特征空间。当两个特征向量相似时，它们发生碰撞的概率更高。给定一个查询图像，可以根据散列冲突对候选列表进行过滤，然后根据精确的距离计算进行重新排序。这种方法有很多变体来加快搜索过程[79]。但是，由于它们缺乏来自训练数据集的信息，因此其检索结果并不令人满意。

____

无监督哈希方法只使用训练数据集的信息，没有标签信息来指导训练阶段。他们的代表包括各向同性哈希(IsoH)[74]、可伸缩图哈希(SGH)[80]、序数嵌入哈希(OEH)[75]等等。但是，由于没有来自训练数据集的信息来指导训练过程，他们的结果有一定的局限性。

____

在监督哈希方法中，它们可以进一步分为传统的监督哈希方法和基于cnn的监督哈希方法。

存在一些传统的监督哈希方法，如快速监督哈希(FastH)[81]、监督离散哈希(SDH)[82]、基于col列采样的发散监督哈希（[83]）[83]和不对称内积二进制编码(AIBC)[84]。与无监督哈希方法相比，传统的有监督哈希方法可以利用图像的标签来生成更高的哈希码的精度分数。然而，对于流式数据，应该修改数据依赖方法中的哈希模型，以适应新的未来数据的分布。

随着来自互联网的数据的不断增长，对大量社交数据的在线搜索更新变得非常耗时。为了缓解这一问题，Ma等人[85]提出了汉明子空间学习(HSL)，即通过选择具有代表性的哈希函数，从高维汉明空间生成低维汉明子空间。HSL可以有效地提高在线更新的速度和在证书上的哈希的性能。即便如此，这些传统的监督哈希方法也有两个明显的缺点：一是它们的特征提取独立于哈希函数学习，因此所设计的特征可能与哈希过程不兼容；另一个问题是它们使用的传统特征不能包含语义信息。

____

近年来，基于cnn的哈希方法成为CBIR研究的热点。

首先，卷积神经网络哈希(CNNH)[86]将基于CNN的深度哈希算法推到了最前沿。这不是一个端到端的培训。

网络哈希(NINH)[87]学习了基于CNN同时学习的特征模块和哈希编码模块。虽然这是一种终端到训练，但特征学习的准确性还不够好。

紧凑根双线性CNN(CRB-CNN)[76]使用集成网络模型获得了更好的语义特征。

Conjeti等人[88]和Cheng等人[78]都提出了残余哈希体系结构来降低计算机的存储容量，提高检索效率。

深度语义排序哈希(DSRH)[89]使用了一种类似于DeepID2的网络结构，并直接让网络学习排序。

同样，Shi等人[77]提出了一种用于检索和分类任务的深度排序散列。

受深度监督哈希(DSH)[90]在线训练策略的启发，利用使用三重标签的更丰富的信息，

Zhou等[91]利用三重损失函数来增强DSH算法来学习紧凑的二进制码。

此外，李etal.[92]提出了一种基于CNN哈希码生成方法，即分段监督深度哈希(PSDH)方法，直接使用潜在层数据和输出层分类网络的结果生成两段哈希代码为每个输入图像。事实上，PSDH在搜索具有相似特征的图片方面表现出色。这些方法大多是端到端训练，它们的特征提取依赖于哈希函数学习。它们具有显著的检索精度，可以节省检索时间。因此，基于cnn的哈希得到到越来越多的关注

___

### (2)Product Quantization(PQ)

CBIR的另一种广泛使用的特征利用数据库搜索方法是乘积量化(PQ)，它将特征空间分解为多个低维子空间的笛卡尔积，然后分别对每个子空间进行量化。在训练阶段，对每个子空间进行聚类，得到多个质心（量化器），所有这些质心的笛卡尔积构成了整个空间的密集划分，可以保证量化误差相对较小。经过量化学习之后，对于给定的查询向量，可以通过查找表计算出查询向量和数据库中每个向量的非对称距离。

一般来说，PQ是以非常低的内存存储和时间成本生成大型代码本的最佳选择。由于哈希方法缺乏特征恢复的精度，在某些情况下，最小量化误差的产品量化方法可以获得优于哈希方法的精度。与监督哈希方法一样，它们也可以分为传统的积量化方法和基于cnn的积量化方法。为清晰起见，基于pq的方法的层次类别如图5所示。

典型的传统产品量化方法有乘积量化(PQ)[94]、优化乘积量化(OPQ)[95]和复合量化(CQ)[96]。

实际上，PQ[94]和OPQ[95]首先将整个特征空间分割成多个子空间，然后对每个子空间分别执行类似的算法。CQ[96]使用与OPQ相同的策略学习了足够多的码本，但其码字的维数等于原始特征的维数。这些传统的产品量化方法可以生成内存存储量低和时间成本低的大型码本。

![image-20220705115143113](D:\文献阅读\image\image-20220705115143113.png)

近年来，基于cnn的乘积量化方法发展迅速。他们使用端到端cnn一起进行图像特征学习和量化。

深度量化网络[97]是第一个学习和量化分离良好的图像特征的深度学习结构。

然后，深度视觉-语义量化[93]使用CQ对分离的图像特征进行量化。

Yu等人[98]提出了一种可微量化方法。

然而，上述方法有两个缺点。

首先，如果我们想要获得具有不同代码长度的二进制代码，它们需要训练许多模型。其次，高维向量空间的分解是很棘手的。为了解决这些问题，深度循环量化(DRQ)[99]和深度渐进量化(DPQ)[100]都做出了一些努力。DRQ[99]使用了一种深度量化方法来构造一个码本，可以循环地用于生成顺序二进制码。此外，DPQ[100]提出了一种大规模图像检索的替代模型。

# 五、Practical applications

随着互联网技术的发展和数字设备的普及，CBIR已被广泛应用于生物医学、医学、军事、商业、艺术等多个领域。在本节中，我们总结了CBIR在待检索对象方面的一些典型实际应用，并将其分别分为时尚图像检索、人物再识别、电子商务产品检索、遥感图像检索和商标图像检索。

## 5.1. Fashion image retrieval

随着服装电子商务的快速发展和互联网上服装图像数据量的增加，使得时尚实例级图像检索(FIR)越来越成为计算机视觉的兴趣。FIR是寻找与任何查询图像相似的时尚图像的任务，它满足了用户的需求。实际上，FIR主要与跨域时尚图像检索有关，即匹配两种图像，一种是用户随意拍摄的，另一种是卖家专业拍摄的。它在网上购物、时尚认可和基于网络的推荐日益增长的需求中发挥着重要作用。然而，由于服装的物品高度变形，图像的视角变化严重，灯光和背景等拍摄环境也变化多样，FIR被认为是一项具有挑战性的任务。

在过去的十年里，许多时尚数据集被提出，以促进FIR的研究。表1给出了它们对图片、类别、对的数量和发布年份的简明比较。

![image-20220705150751664](D:\文献阅读\image\image-20220705150751664.png)

随着大规模时尚数据集的可用性，许多基于深度学习的FIR方法被提出，并且效果良好。这些方法采用了先进的深度学习技术来提高检索性能。一些FIR方法利用度量学习的进步，采用了各种注意机制。

Gajic等人，[106]非常重视提高训练过程和推理时间。他们强调了对简单架构进行适当训练的重要性，使用三重损失来训练网络，并使一般模型适应于特定的任务。

视觉注意模型(VAM)[107]训练了一个带有注意分支和一个全局卷积分支的双流网络，形成一个端到端网络结构，然后将生成的向量连接起来，优化一个标准的三重目标函数。

时尚网[103]也使用三重损失来训练网络。

Zhao等人[108]提出了一种Hard Triplet Generation对抗网络(HTG)，以优化网络区分不同类别的相似例子的能力，并对相同类别的不同例子进行分组。

Hard-aware Deeply Cascaded embedding(HDC)[109]结合了一组具有级联机制不同复杂性的模型，在多个层次上挖掘 hard examples。然后，将每个子网络中的特征向量按常量的权值进行缩放，并连接起来生成用于检索的表示形式。

网格搜索网络(GSN)[110]将训练过程假定为一个搜索问题，重点是在包含正图像和负图像的网格中定位参考查询图像的匹配。

一些FIR方法使用属性模块[111,101,112,113]。

Minchul等人的[113]旨在在FIR上取得竞争表现。他们提出了一种新的方法，将查询转换为具有所需属性的表示，并在特征级别引入了属性操作的新想法。一些算法结合了深度学习中的许多技术。

Park等人[114]研究了训练策略和DNNs来提高检索性能。结果表明，更好的训练策略、更好的数据增强和更好的结构细化可以获得更好的FIR结果。

如表2所示，我们在DeepDashon数据集的两个子集上比较了一些方法。

![image-20220705151605380](D:\文献阅读\image\image-20220705151605380.png)

## 5.2. Person Re-IDentifification

人再识别(Re-ID)，也称为人检索，是指匹配在不同的相机视图上捕获的同一个人的图像，通常被认为是图像检索的一个子问题。PersonRe-ID可以在跨设备图像视频中检索特定的行人目标，并弥补当前固定摄像机的视角限制。它具有智能安全、智能视频监控、智能检索等广泛的应用前景。在个人重新识别方面有三个主要的挑战。（1）由于背景和外观（如光照、姿态、遮挡、分辨率）的不同，来自不同相机视图的图像之间存在显著差异。（2）对具有不同身份的相似图像存在一些干扰。（3）人体姿势和人体闭塞的改变可能会使问题更加复杂。为了解决这些挑战，人们从不同的理论角度付出了许多努力。

这些工作的一个分支是学习有效的表示，以提高检索性能。

在这个分支中，一些人的ReID方法是基于注意力[115,116]的。

Mancs[115]充分利用人错位问题的注意机制解决了人再识别问题。

Li等人[116]展示了在CNN中联合学习注意选择和特征表示的优势，通过最大化不同层次视觉注意的互补信息。

受有效的人体姿态估计的启发，一些人的Re-ID方法以姿态[117–119]为指导。

Li等人[117]提出了一种新的方法，利用空间变换网络(STN)来学习和定位可变形的行人部分。

Saquib等人[118]提出了一种有效的方法，将人的细和粗姿态信息结合起来来学习鉴别嵌入。

此外，注意感知特征组成(AFC)[119]估计了所提出的AFC模块中身体部位的姿态引导可见性分数，以处理部分遮挡。

一些人的Re-ID方法是由mask引导的，因为忽略了背景杂波的问题会导致的性能下降。[120]

为了缓解背景杂乱的问题，Qi等人[120]将只包含前景区域的掩蔽图像合并，并将其输入到所提出的神经网络中。

有些人的RE-ID方法使用GAN[121–123]。

Martinel等人[121]应用字典学习方案，将目标识别和人检测学习到的特征转移到目标再识别域。

Wei等人[122]提出了一种人转移生成对抗网络(PTGAN)来弥补领域差距，这在不同数据集上的训练和测试时导致了严重的性能下降。

相机风格（相机风格）[123]使用了GAN作为一种数据增强方法，减少了过拟合的风险，并平滑了相机风格的差异。



这些工作的另一个分支致力于深度度量学习。大多数现有的Re-ID框架都通过对比损失或三联体损失[124]或四联体损失[59]进行优化。

Cheng等人[124]在三重态损失中引入了一个pull term，以惩罚正嵌入之间的大距离。

Chen等人[59]为四联体损失中负对之间的距离增加了另一个 pull term，这可以得到一个具有较大的类间变异和较小的类内变异的模型。

Bai等人的[125]专注于利用Re-ID的度量融合能力进行重新排序。所提出的统一集成扩散(UED)是一种有效的算法，它在Market-1501数据集上实现了最先进的检索性能。

除了上述提高搜索性能的算法外，一些研究人员还试图为人的Re-ID[126,127]建立一个基线。

一个好的基线对方法的比较和评价非常重要。

首先，它本质上导致了在没有公共基线的不同人reid方法之间的不公平比较。

其次，判断现有的基于cnn的人再识别方法的客观能力具有重要意义。

为了解决上述问题，Xiong等[126]提出了三种建立有效的CNN基线模型的方法：在全局池化层后进行批量归一化，仅使用一个全连接层直接执行身份分类，并使用Adam作为优化器。

此外，Luo等人[127]收集并评估了一些有效的Re-ID训练技巧，然后将这些技巧结合起来构建一个表现良好的基线，达到高性能的基线。

随着深度学习在个人ReID中的广泛应用，一些大规模的数据集已经发表。它们如表3所示。我们比较了Market1501数据集和DukeMTMC数据集上的一些Re-ID方法。并且，结果如表4所示。

![image-20220705153204201](D:\文献阅读\image\image-20220705153204201.png)

## 5.3. E-commerce product retrieval

电子商务产品检索是阿里巴巴[131]、JD[132]、eBay[133]、沃尔玛[134]等电子商务平台上最重要的组成部分之一。在电子商务购物中，消费者通常不知道正确的关键词来找到他们想要的商品。电子商务产品检索可以帮助消费者搜索他们想要的产品。然而，这项任务很有挑战性。首先，很难处理异构图像数据，并缩小用户真实拍摄图像与在线图像之间的差距。其次，处理针对大量更新数据的大规模索引也不是一件容易的事。

### 5.4. Remote sensing image retrieval

随着遥感技术的发展，遥感图像的数量和质量大幅提高。遥感图像可用于某些领域去解决天气预报、气候监测、城市规划、地质分析、灾害监测、资源调查等重要问题。

其中，基于内容的遥感图像检索(CBRSIR)是能够有效利用这些遥感数据的关键问题。它可以自动有效地从大型图像数据库中检索到用户所需要的遥感图像，并引起了世界各地研究人员的广泛关注。根据该方法的改进，我们可以将过去十年的CBRSIR方法分为两类：基于特征的CBRSIR方法和基于哈希的CBRSIR方法。

### 5.5. Trademark image retrieval

商标是企业品牌的象征。保护商标不受侵权和盗版的侵害，对促进企业发展和保护消费者利益具有重要意义。商标图像检索(TIR)可以搜索与来自商标数据集的给定输入相似或相关的所有商标图像。商标图像是人工设计的，与自然场景图像截然不同。它们通常由图形和文本原语组成，其中的颜色和字体可以是可变化的和艺术的。因此，一些自然场景图像特征不足以描述复杂的商标图像。商标图像检索方法。

# 六、Future research directions

由此可见，CBIR在过去的十年中，在理论、技术和应用等方面都取得了很大的进步。然而，仍然存在着许多挑战，特别是随着大数据的出现和深度学习技术的利用。在本节中，我们将讨论这些挑战，并给出一些未来潜在的研究方向。

## 6.1. Collecting more and larger datasets

CBIR在未来研究中的一个关键方向是收集更多、更大的数据集。深度学习技术是经过数据分割的。一般来说，只要出现新的大规模数据集，我们就可以训练良好的深度神经网络模型来刷新检索精度，解决数据库搜索问题。然而，在训练过程中，过拟合的问题可能会阻碍学习算法的突破。因此，更多和更大的数据集是必要的和有价值的。

对于一般的实例检索，越来越大的实例数据集可以使搜索适用于许多搜索目的。如果CBIR系统中的CNN采用更大的数据集训练大型再识别数据集和大型电子商务产品检索数据集，可以有效地应用于服装搜索和商品搜索。对于各种专门的实例检索，越来越多、越来越大的数据集对检索的性能也至关重要。新的最先进的方法只能通过更大的规模和更丰富的数据集形式来建立。为了有效地使用数据集，新数据集的标签应该足够准确，以消除图像内容相关性中的一些歧义问题，如商品图标数据。

## 6.2. Establishing the effective learning strategies for small scale image retrieval

CBIR在未来研究中的另一个关键方向是建立一些有效的小规模图像检索学习策略。目前，大多数CBIR方法都需要足够大的数据集，甚至是大量的数据集。例如，对于检索任务，图像收集和标记的成本是困难和昂贵的，这限制了CBIR在现实场景中的开发。然而，人类有能力在监督信息很少的情况下学习新的概念。例如，一个成年人可以在没有监督的情况下找到最相似的图像。为了使CBIR有相同的学习能力通过少量的训练样本，研究人员需要建立更有效的学习策略与一个小规模训练数据集，这样CBIR方法可以使大规模数据库搜索在各种真实的场景。

## 6.3. Establishing more effificient database search

在实例检索的实际应用中，特别是在参考数据集非常大的情况下，搜索输入图像的最近邻居的时间成本是非常昂贵的。由于其实现简单、查询速度快、存储成本低等优点，哈希，特别是深度哈希，已被广泛应用到大规模数据集上的检索任务中。然而，基于哈希的方法在将特征向量转换为二进制编码时还面临着失去精度的问题，这将导致次优的检索结果，进一步降低搜索精度。因此，如何建立一个更高效、更精确的数据库搜索是我们未来工作的重大突破。

## 6.4. Adoption of the automated machine learning and neural architecture search

目前，最先进的深度神经网络架构是人工设计的，然而，考虑到机器快速发展的计算能力和“滞后”的”人类知识，这已经成为一个限制。为了解决这一问题，一些新的深度学习神经网络可以为学习任务设计自己的最佳学习架构。自动机器学习(AutoML)和神经结构搜索(NAS)是在计算机视觉界引起广泛关注的两种模型。实际上，许多最近基于AutoML或NAS的方法已经取得了最先进的结果，并在各种计算机视觉应用程序中优于和设计的架构。因此，需要将AutoML和NAS同时应用到实例检索任务中，以获得更有效的图像表示。

# 七、Conclusion

在本调查中，我们总结了近十年来在技术和实际应用中基于内容的图像检索的最新进展。首先，我们回顾了CBIR的图像表示（或特征提取）和数据库搜索的发展。然后分别介绍了CBIR在时尚图像检索、人再识别、电子商务产品检索、遥感图像检索和商标标签图像检索等方面的典型实际应用。最后，我们讨论了未来随着大数据的出现和深度学习技术技术的应用所面临的挑战和潜在的研究方向。很明显，CBIR已经发展到一个新时代，在未来的日常生活的人工智能中发挥重要作用